module.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var u=t[o](i),a=u.value}catch(e){return void n(e)}if(!u.done)return Promise.resolve(a).then(function(e){r("next",e)},function(e){r("throw",e)});e(a)}return r("next")})}}function o(e){return function(t){function n(){document.body.removeChild(g)}var o=this,a=t.accept,c=void 0===a?"":a,s=t.limit,f=void 0===s?1:s,p=t.maxSize,l=void 0===p?20971520:p,d=t.onStart,h=void 0===d?u:d,v=t.onProgress,m=void 0===v?u:v,x=t.onSuccess,y=void 0===x?u:x,b=t.onError,k=void 0===b?u:b,g=document.createElement("input");g.type="file",g.accept=c,g.multiple=f>1,g.style.display="none",g.addEventListener("change",function(){var t=r(regeneratorRuntime.mark(function t(r){var u,a,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=Array.from(r.target.files).slice(0,f),a=0,t.prev=2,u.forEach(function(e){if(e.size>l)throw new Error("exceed the maximum file size limit")}),h(u),t.next=7,Promise.all(u.map(function(t){return Object(i.a)(t,e).then(function(e){return a+=1,m(a,u.length),e})}));case 7:c=t.sent,y(c),n(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),k(t.t0),n();case 16:case"end":return t.stop()}},t,o,[[2,12]])}));return function(e){return t.apply(this,arguments)}}()),document.body.appendChild(g),g.click()}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"upload",function(){return a}),t.default=o;var i=n(1),u=function(){},a=i.a},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var u=t[o](i),a=u.value}catch(e){return void n(e)}if(!u.done)return Promise.resolve(a).then(function(e){r("next",e)},function(e){r("throw",e)});e(a)}return r("next")})}}var o=this,i=function(e){return e instanceof ArrayBuffer?e.byteLength:e.length},u=function(e,t,n){return e.slice(n*t,(n+1)*t)},a=function(e){return window.btoa(e).replace(/\//g,"_").replace(/\+/g,"-")},c=function(e,t,n){return new Promise(function(){var i=r(regeneratorRuntime.mark(function r(i,u){var a,c;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch(e,{method:"POST",headers:t,body:n,mode:"cors"});case 3:return a=r.sent,r.next=6,a.json();case 6:if(c=r.sent,200===a.status){r.next=9;break}throw new Error(c.error);case 9:i(c),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),u(r.t0);case 15:case"end":return r.stop()}},r,o,[[0,12]])}));return function(e,t){return i.apply(this,arguments)}}())},s=function(e){return new Promise(function(t,n){var r=new FileReader;r.addEventListener("load",function(){t(r.result)}),r.addEventListener("error",n),r.readAsArrayBuffer(e)})},f=function(e,t,n,r){return c(e+"/mkblk/"+i(t),{"Content-Type":"application/octet-stream","Content-Length":i(n),Authorization:"UpToken "+r},n)},p=function(e,t,n){var r=t.host,o=t.ctx,u=t.offset;return c(r+"/bput/"+o+"/"+u,{"Content-Type":"application/octet-stream","Content-Length":i(e),Authorization:"UpToken "+n},e)},l=function(e,t,n,r,o){return c(e+"/mkfile/"+t+"/key/"+r,{"Content-Type":"text/plain","Content-Length":i(n),Authorization:"UpToken "+o},n)},d=function(){},h=function(){var e=r(regeneratorRuntime.mark(function e(t,n){var c,h,v,m,x,y,b,k,g,w,P,z,R,A,C,E,L,T=n.host,j=void 0===T?"http://upload.qiniu.com":T,O=n.domain,S=void 0===O?"":O,_=n.token,M=n.getKey,U=n.chunkSize,B=void 0===U?262144:U,q=n.blockSize,F=void 0===q?4194304:q,K=n.onProgress,W=void 0===K?d:K;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof _){e.next=6;break}return e.next=3,_();case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=_;case 7:return c=e.t0,e.next=10,s(t);case 10:return h=e.sent,v=h.byteLength,m=0,x=Math.ceil(v/F),y=Array(x).fill(0).map(function(e,t){return u(h,F,t)}),e.next=17,Promise.all(y.map(function(){var e=r(regeneratorRuntime.mark(function e(t){var n,r,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.ceil(i(t)/B),r=void 0,a=0;case 3:if(!(a<n)){e.next=19;break}if(s=u(t,B,a),0!==a){e.next=11;break}return e.next=8,f(j,t,s,c);case 8:r=e.sent,e.next=14;break;case 11:return e.next=13,p(s,r,c);case 13:r=e.sent;case 14:m+=i(s),W(m,v);case 16:a++,e.next=3;break;case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}()));case 17:return b=e.sent,k=b.slice(-1)[0],g=b.map(function(e){return e.ctx}),w="function"==typeof M?a(M(t)):"",e.next=23,l(k.host||j,v,g.join(","),w,c);case 23:return P=e.sent,z=P.hash,R=P.key,A=t.name,C=t.size,E=t.type,L={hash:z,key:R,name:A,size:C,type:E,url:(S.endsWith("/"),S+"/"+R)},e.abrupt("return",L);case 29:case"end":return e.stop()}},e,o)}));return function(t,n){return e.apply(this,arguments)}}();t.a=h}]);